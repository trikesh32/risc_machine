# Рисковая машинка)
- Трикашный Михаил Дмитриеви P3206
- Вариант: `asm | risc | harv | mc | tick | binary | stream | mem | cstr | prob1 | vector`
- Расшифровка:
  - `asm`: синтаксис ассемблера. Необходима поддержка `label`-ов, секций и директивы `.org`. Поддержка пользовательских макроопределений. 
  - `risc`: система команд должна быть упрощенной, в духе RISC архитектур
    -  Стандартизированная длина команд.
    -  Операции над данными осуществляются только в рамках регистров.
    -  Доступ к памяти и ввод-вывод -- отдельные операции
  - `harv`: Гарвардская архитектура
  - `mc`: команды реализованы с помощью микрокоманд
  - `tick`: процессор необходимо моделировать с точностью до такта, процесс моделирования может быть приостановлен на любом такте.
  - `binary`: бинарное представление машинного кода
  - `stream`: Ввод-вывод осуществляется как поток токенов.
  - `mem`: порты ввода-вывода отображаются в память и доступ к ним осуществляется штатными командами
  - `cstr`: Null-terminated (C string)
  - `prob1`: Euler problem 4 [link](https://projecteuler.net/problem=4)
  - `vector`: векторная организация процессора (понятие не имею что бы это значило)

# Кодирование инструкций
Одна инструкция состоит из 4 байт (32 бит)
- Старший байт (4ый байт) - опкод
- 3ий байт - регистр возврата. Пример:
  - `00010000` - регистр r1
  - `00110000` - регистр r3
  - `01100000` - регистр PC
- 2ой байт - первый операнд. Пример:
  - `00010000` - регистр r1
  - `00110000` - регистр r3
  - `01100000` - регистр PC
- Младший байт (1ый байт) - второй операнд. Пример:
  - `00010000` - регистр r1
  - `00110000` - регистр r3

Подробнее про старший байт (опкод):
- 8ой бит (старший):
  - при активации команда берет в качестве единственного операнда младшие 20 бит как `immediate` (используется в `lui` - Load Upper Immediate)
- 7ой бит:
  - при активации команда берет в качестве второго операнда младшие 12 бит как `immediate` (используется в командах `addi` или `subi`)
- 6ой бит:
  - при активации обозначает инструкцию перехода (подробнее ниже)
- 5ый бит:
  - при активации обозначает инструкцию обращения к памяти (подробнее ниже)
- младшие 4 бит - дополнительная информация об инструкции:
  - `0000` - `add`, при активации бита перехода - `beq`, при активации бита обращения к памяти - `lw`
  - `0001` - `sub`, при активации бита перехода - `bne`. при активации бита обращения к памяти - `sw`
  - И так далее (подробнее ниже)
- При активации всех старших бит опкода, инструкция интерпретируется как `halt` 


# Регистры
Доступные программисту:
`r0` `r1` `r2` `r3` `r4` `r5` `r6` `Sp`
Недоступные программисту: `Ar` `Pc` `Mc` `Mr`
- `r0` - `r6` - 32х битные регистры общего назначения
- `Sp` - 32х битный регистр общего назначения, но по лору это stack pointer
- `Ar` - регистр, хранящий в себе адрес памяти данных
- `Pc` - регистр, хранящий в себе адрес памяти инструкций
- `Mc` - регистр, хранящий в себе адрес памяти микрокоманд
- `Mr` - регистр, хранящий в себе микрокоманду, по адресу в `Mc`